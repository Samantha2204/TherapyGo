{"ast":null,"code":"var _jsxFileName = \"/Users/sammi/Desktop/TherapyGo/src/components/LoginFormComponent/LoginFormComponent.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport './LoginFormComponent.scss';\nimport { useHistory } from 'react-router-dom';\nimport Link from '@material-ui/core/Link/';\nimport { TextField } from '@material-ui/core/';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport { theme } from '../../colour';\nimport MyButton from './MyButton';\nimport { login } from '../../api/login';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LoginFormComponent = () => {\n  _s();\n\n  const [user, setUser] = useState({\n    email: '',\n    password: ''\n  });\n  const [error, setError] = useState({\n    state: false,\n    message: ''\n  });\n  const history = useHistory();\n\n  const handleChange = event => {\n    setUser({ ...user,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const handleFocus = () => {\n    setError({ ...error,\n      state: false,\n      message: null\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      await login(user).then(res => {\n        sessionStorage.setItem('token', res.token);\n        sessionStorage.setItem('customer_id', res.customer_id);\n        sessionStorage.setItem('role', res.role);\n\n        if (res.token !== undefined) {\n          if (res.role === 'admin') {\n            history.replace('/worksheet');\n          } else if (res.role === 'customer') {\n            history.replace('/userProfile');\n          } else if (res.role === 'boss') {\n            history.replace('/staff');\n          }\n        }\n\n        if (res.code === 404) {\n          setError({ ...error,\n            state: true,\n            message: res.message\n          });\n        }\n      });\n    } catch (err) {\n      throw 404, err;\n    }\n  };\n\n  const {\n    state,\n    message\n  } = error;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form__Container\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"login__form\",\n      onSubmit: handleSubmit,\n      children: /*#__PURE__*/_jsxDEV(ThemeProvider, {\n        theme: theme,\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          autoFocus: true,\n          required: true,\n          fullWidth: true,\n          error: state,\n          helperText: message,\n          variant: \"outlined\",\n          margin: \"normal\",\n          size: \"small\",\n          id: \"inputEmail\",\n          label: \"Email Address\",\n          name: \"email\",\n          type: \"email\",\n          autoComplete: \"email\",\n          onChange: handleChange,\n          onFocus: handleFocus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"outlined\",\n          margin: \"normal\",\n          size: \"small\",\n          required: true,\n          fullWidth: true,\n          name: \"password\",\n          label: \"Password\",\n          type: \"password\",\n          id: \"inputPassword\",\n          autoComplete: \"current-password\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MyButton, {\n          text: \"Login\",\n          type: \"submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          href: \"/forgetpassword\",\n          variant: \"body2\",\n          id: \"login-form__link\",\n          children: \"Forgot your password? Click here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n\n_s(LoginFormComponent, \"SJA89XtgQrc6tpuRjRvwSmvOLgg=\", false, function () {\n  return [useHistory];\n});\n\n_c = LoginFormComponent;\nexport default LoginFormComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginFormComponent\");","map":{"version":3,"sources":["/Users/sammi/Desktop/TherapyGo/src/components/LoginFormComponent/LoginFormComponent.js"],"names":["React","useState","useHistory","Link","TextField","ThemeProvider","theme","MyButton","login","LoginFormComponent","user","setUser","email","password","error","setError","state","message","history","handleChange","event","target","name","value","handleFocus","handleSubmit","e","preventDefault","then","res","sessionStorage","setItem","token","customer_id","role","undefined","replace","code","err"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport './LoginFormComponent.scss';\nimport { useHistory } from 'react-router-dom';\nimport Link from '@material-ui/core/Link/';\nimport { TextField } from '@material-ui/core/';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport { theme } from '../../colour';\nimport MyButton from './MyButton';\nimport { login } from '../../api/login';\n\nconst LoginFormComponent = () => {\n  const [user, setUser] = useState({ email: '', password: '' });\n  const [error, setError] = useState({ state: false, message: '' });\n  const history = useHistory();\n\n  const handleChange = (event) => {\n    setUser({ ...user, [event.target.name]: event.target.value });\n  };\n\n  const handleFocus = () => {\n    setError({ ...error, state: false, message: null });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      await login(user)\n        .then((res) => {\n          sessionStorage.setItem('token', res.token);\n          sessionStorage.setItem('customer_id', res.customer_id);\n          sessionStorage.setItem('role', res.role);\n          if (res.token !== undefined) {\n            if (res.role === 'admin') {\n              history.replace('/worksheet');\n            } else if (res.role === 'customer') {\n              history.replace('/userProfile');\n            } else if (res.role === 'boss') {\n              history.replace('/staff');\n            }\n          }\n          if (res.code === 404) {\n            setError({ ...error, state: true, message: res.message });\n          }\n        })\n    } catch (err) {\n      throw (404, err);\n    }\n  };\n\n  const { state, message } = error;\n\n  return (\n    <div className=\"form__Container\">\n      <form className=\"login__form\" onSubmit={handleSubmit}>\n        <ThemeProvider theme={theme}>\n          <TextField\n            autoFocus\n            required\n            fullWidth\n            error={state}\n            helperText={message}\n            variant=\"outlined\"\n            margin=\"normal\"\n            size=\"small\"\n            id=\"inputEmail\"\n            label=\"Email Address\"\n            name=\"email\"\n            type=\"email\"\n            autoComplete=\"email\"\n            onChange={handleChange}\n            onFocus={handleFocus}\n          />\n\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            size=\"small\"\n            required\n            fullWidth\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            id=\"inputPassword\"\n            autoComplete=\"current-password\"\n            onChange={handleChange}\n          />\n          <MyButton text=\"Login\" type=\"submit\" />\n          <Link href=\"/forgetpassword\" variant=\"body2\" id=\"login-form__link\">\n            Forgot your password? Click here\n          </Link>\n        </ThemeProvider>\n      </form>\n    </div>\n  );\n};\n\nexport default LoginFormComponent;\n"]},"metadata":{},"sourceType":"module"}